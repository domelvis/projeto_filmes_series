{% extends 'base.html' %} {% block title %}Criar Conta - Plataforma S√©ries TV{%
endblock %} {% block meta %}
<meta
  name="description"
  content="Junte-se √† Plataforma S√©ries TV. Crie sua conta gratuita e comece a explorar, avaliar e compartilhar suas s√©ries favoritas."
/>
<meta name="robots" content="noindex, nofollow" />
{% endblock %} {% block body_class %}register-page{% endblock %} {% block
page_id %}user-register{% endblock %} {% block content %}
<!-- Container Principal de Registro -->
<main class="register-container" role="main">
  <div class="register-background">
    <div class="background-pattern"></div>
  </div>

  <div class="register-content">
    <!-- Header do Registro -->
    <header class="register-header">
      <nav class="register-breadcrumb" aria-label="Navega√ß√£o de localiza√ß√£o">
        <a href="{% url 'series:home' %}" class="breadcrumb-link">
          <span class="breadcrumb-icon">üè†</span>
          P√°gina Inicial
        </a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-current">Criar Conta</span>
      </nav>

      <div class="register-brand">
        <a href="{% url 'series:home' %}" class="brand-link">
          <span class="brand-icon">üé¨</span>
          <span class="brand-text">S√©ries TV</span>
        </a>
      </div>
      <script src="https://cdn.tailwindcss.com"></script>

      <!-- Seus outros links CSS -->
      {% load static %}
      <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    </header>

    <!-- Card de Registro -->
    <div class="register-card" role="region" aria-labelledby="register-title">
      <div class="card-header">
        <h1 id="register-title" class="card-title">
          <span class="title-icon">‚ú®</span>
          Junte-se √† Nossa Comunidade
        </h1>
        <p class="card-subtitle">
          Crie sua conta e comece sua jornada no mundo das s√©ries
        </p>
      </div>

      <!-- Formul√°rio de Registro -->
      <form method="post" class="register-form" novalidate>
        {% csrf_token %}

        <!-- Mensagens de Erro Gerais -->
        {% if form.non_field_errors %}
        <div class="alert alert--error" role="alert" aria-live="polite">
          <div class="alert-icon">‚ö†Ô∏è</div>
          <div class="alert-content">
            <h4 class="alert-title">Erro no Formul√°rio</h4>
            {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        <!-- Se√ß√£o: Informa√ß√µes Pessoais -->
        <section class="form-section" aria-labelledby="personal-info-title">
          <h2 id="personal-info-title" class="section-title">
            <span class="section-icon">üë§</span>
            Informa√ß√µes Pessoais
          </h2>

          <div class="form-grid">
            <!-- Nome de Usu√°rio -->
            <div class="form-field">
              <label
                for="{{ form.username.id_for_label }}"
                class="field-label required"
              >
                <span class="label-icon">üîë</span>
                Nome de Usu√°rio
              </label>
              <div class="field-wrapper">
                <input
                  type="text"
                  id="{{ form.username.id_for_label }}"
                  name="{{ form.username.name }}"
                  class="field-input"
                  placeholder="Escolha um nome de usu√°rio √∫nico..."
                  value="{{ form.username.value|default:'' }}"
                  required
                  autocomplete="username"
                  aria-describedby="username-help username-error"
                />
                <span class="field-icon">üë§</span>
              </div>
              <small id="username-help" class="field-help">
                √önico, 3-150 caracteres. Letras, n√∫meros e @/./+/-/_ apenas.
              </small>
              {% if form.username.errors %}
              <div
                id="username-error"
                class="field-error"
                role="alert"
                aria-live="polite"
              >
                {% for error in form.username.errors %}
                <span class="error-icon">‚ùå</span>{{ error }} {% endfor %}
              </div>
              {% endif %}
            </div>

            <!-- Nome Completo -->
            <div class="form-field form-field--full">
              <div class="name-fields">
                <div class="name-field">
                  <label
                    for="{{ form.first_name.id_for_label }}"
                    class="field-label"
                  >
                    <span class="label-icon">üìù</span>
                    Primeiro Nome
                  </label>
                  <input
                    type="text"
                    id="{{ form.first_name.id_for_label }}"
                    name="{{ form.first_name.name }}"
                    class="field-input"
                    placeholder="Seu primeiro nome"
                    value="{{ form.first_name.value|default:'' }}"
                    autocomplete="given-name"
                    aria-describedby="firstname-help"
                  />
                </div>
                <div class="name-field">
                  <label
                    for="{{ form.last_name.id_for_label }}"
                    class="field-label"
                  >
                    <span class="label-icon">üìù</span>
                    Sobrenome
                  </label>
                  <input
                    type="text"
                    id="{{ form.last_name.id_for_label }}"
                    name="{{ form.last_name.name }}"
                    class="field-input"
                    placeholder="Seu sobrenome"
                    value="{{ form.last_name.value|default:'' }}"
                    autocomplete="family-name"
                    aria-describedby="lastname-help"
                  />
                </div>
              </div>
              <small id="name-help" class="field-help">
                Opcional, mas recomendado para personaliza√ß√£o.
              </small>
            </div>

            <!-- Email -->
            <div class="form-field">
              <label
                for="{{ form.email.id_for_label }}"
                class="field-label required"
              >
                <span class="label-icon">üìß</span>
                Email
              </label>
              <div class="field-wrapper">
                <input
                  type="email"
                  id="{{ form.email.id_for_label }}"
                  name="{{ form.email.name }}"
                  class="field-input"
                  placeholder="seu@email.com"
                  value="{{ form.email.value|default:'' }}"
                  required
                  autocomplete="email"
                  aria-describedby="email-help email-error"
                />
                <span class="field-icon">‚úâÔ∏è</span>
              </div>
              <small id="email-help" class="field-help">
                Usaremos para confirma√ß√£o e notifica√ß√µes importantes.
              </small>
              {% if form.email.errors %}
              <div
                id="email-error"
                class="field-error"
                role="alert"
                aria-live="polite"
              >
                {% for error in form.email.errors %}
                <span class="error-icon">‚ùå</span>{{ error }} {% endfor %}
              </div>
              {% endif %}
            </div>
          </div>
        </section>

        <!-- Se√ß√£o: Seguran√ßa -->
        <section class="form-section" aria-labelledby="security-title">
          <h2 id="security-title" class="section-title">
            <span class="section-icon">üîí</span>
            Seguran√ßa da Conta
          </h2>

          <div class="form-grid">
            <!-- Senha -->
            <div class="form-field">
              <label
                for="{{ form.password1.id_for_label }}"
                class="field-label required"
              >
                <span class="label-icon">üîë</span>
                Senha
              </label>
              <div class="field-wrapper">
                <input
                  type="password"
                  id="{{ form.password1.id_for_label }}"
                  name="{{ form.password1.name }}"
                  class="field-input field-input--password"
                  placeholder="Crie uma senha segura..."
                  required
                  autocomplete="new-password"
                  aria-describedby="password1-help password1-error"
                />
                <span class="field-icon">üîí</span>
                <button
                  type="button"
                  class="password-toggle"
                  data-target="{{ form.password1.id_for_label }}"
                  aria-label="Mostrar/ocultar senha"
                >
                  <span class="toggle-icon">üëÅÔ∏è</span>
                </button>
              </div>
              <small id="password1-help" class="field-help">
                M√≠nimo 8 caracteres. Use letras, n√∫meros e s√≠mbolos.
              </small>
              {% if form.password1.errors %}
              <div
                id="password1-error"
                class="field-error"
                role="alert"
                aria-live="polite"
              >
                {% for error in form.password1.errors %}
                <span class="error-icon">‚ùå</span>{{ error }} {% endfor %}
              </div>
              {% endif %}
            </div>

            <!-- Confirma√ß√£o de Senha -->
            <div class="form-field">
              <label
                for="{{ form.password2.id_for_label }}"
                class="field-label required"
              >
                <span class="label-icon">‚úÖ</span>
                Confirmar Senha
              </label>
              <div class="field-wrapper">
                <input
                  type="password"
                  id="{{ form.password2.id_for_label }}"
                  name="{{ form.password2.name }}"
                  class="field-input field-input--password"
                  placeholder="Digite a senha novamente..."
                  required
                  autocomplete="new-password"
                  aria-describedby="password2-help password2-error"
                />
                <span class="field-icon">üîí</span>
                <button
                  type="button"
                  class="password-toggle"
                  data-target="{{ form.password2.id_for_label }}"
                  aria-label="Mostrar/ocultar senha"
                >
                  <span class="toggle-icon">üëÅÔ∏è</span>
                </button>
              </div>
              <small id="password2-help" class="field-help">
                Digite a mesma senha para confirma√ß√£o.
              </small>
              {% if form.password2.errors %}
              <div
                id="password2-error"
                class="field-error"
                role="alert"
                aria-live="polite"
              >
                {% for error in form.password2.errors %}
                <span class="error-icon">‚ùå</span>{{ error }} {% endfor %}
              </div>
              {% endif %}
            </div>
          </div>

          <!-- Indicador de For√ßa da Senha -->
          <div class="password-strength" id="passwordStrength">
            <div class="strength-header">
              <span class="strength-label">For√ßa da senha:</span>
              <span class="strength-value" id="strengthValue">Fraca</span>
            </div>
            <div class="strength-bar">
              <div class="strength-fill" id="strengthFill"></div>
            </div>
            <div class="strength-requirements" id="strengthRequirements">
              <div class="requirement" data-requirement="length">
                <span class="requirement-icon">‚è≥</span>
                <span class="requirement-text">M√≠nimo 8 caracteres</span>
              </div>
              <div class="requirement" data-requirement="lowercase">
                <span class="requirement-icon">üî°</span>
                <span class="requirement-text">Letra min√∫scula</span>
              </div>
              <div class="requirement" data-requirement="uppercase">
                <span class="requirement-icon">üî†</span>
                <span class="requirement-text">Letra mai√∫scula</span>
              </div>
              <div class="requirement" data-requirement="number">
                <span class="requirement-icon">üî¢</span>
                <span class="requirement-text">Pelo menos 1 n√∫mero</span>
              </div>
              <div class="requirement" data-requirement="special">
                <span class="requirement-icon">‚ö°</span>
                <span class="requirement-text">Caractere especial</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Se√ß√£o: Termos e Prefer√™ncias -->
        <section class="form-section" aria-labelledby="terms-title">
          <h2 id="terms-title" class="section-title">
            <span class="section-icon">üìã</span>
            Termos e Prefer√™ncias
          </h2>

          <!-- Aceita√ß√£o dos Termos -->
          <div class="form-field form-field--full">
            <label class="option-checkbox required">
              <input
                type="checkbox"
                id="agree_terms"
                name="agree_terms"
                class="checkbox-input"
                required
                aria-describedby="terms-help terms-error"
              />
              <span class="checkmark"></span>
              <span class="option-label">
                Eu concordo com os
                <a href="/termos" target="_blank" class="terms-link"
                  >Termos de Uso</a
                >
                e
                <a href="/privacidade" target="_blank" class="terms-link"
                  >Pol√≠tica de Privacidade</a
                >
              </span>
            </label>
            <small id="terms-help" class="field-help">
              Voc√™ deve aceitar os termos para criar uma conta.
            </small>
            <div
              id="terms-error"
              class="field-error"
              role="alert"
              aria-live="polite"
              style="display: none"
            ></div>
          </div>

          <!-- Newsletter Opt-in -->
          <div class="form-field form-field--full">
            <label class="option-checkbox">
              <input
                type="checkbox"
                id="newsletter_optin"
                name="newsletter_optin"
                class="checkbox-input"
                checked
                aria-describedby="newsletter-help"
              />
              <span class="checkmark"></span>
              <span class="option-label">
                <span class="option-icon">üì∞</span>
                Receber newsletter com novidades e recomenda√ß√µes
              </span>
            </label>
            <small id="newsletter-help" class="field-help">
              Voc√™ pode cancelar a qualquer momento.
            </small>
          </div>
        </section>

        <!-- Bot√£o de Submit -->
        <div class="form-actions">
          <button
            type="submit"
            class="btn btn--primary btn--register"
            id="registerButton"
          >
            <span class="btn-icon">üöÄ</span>
            <span class="btn-text">Criar Minha Conta</span>
            <span class="btn-loading" aria-hidden="true">‚è≥</span>
          </button>
        </div>
      </form>

      <!-- Divisor -->
      <div class="register-divider">
        <span class="divider-text">J√° tem uma conta?</span>
      </div>

      <!-- Link para Login -->
      <div class="register-footer">
        <a href="{% url 'users:login' %}" class="btn btn--outline btn--login">
          <span class="btn-icon">üîë</span>
          Fazer Login na Minha Conta
        </a>
      </div>
    </div>

    <!-- Benef√≠cios da Plataforma -->
    <aside class="benefits-sidebar" aria-labelledby="benefits-title">
      <h3 id="benefits-title" class="benefits-title">
        <span class="benefits-icon">üéÅ</span>
        Benef√≠cios da Sua Conta
      </h3>

      <div class="benefits-list">
        <div class="benefit-item">
          <span class="benefit-icon">üì∫</span>
          <div class="benefit-content">
            <h4>Cat√°logo Completo</h4>
            <p>Acesso a milhares de s√©ries com informa√ß√µes detalhadas</p>
          </div>
        </div>

        <div class="benefit-item">
          <span class="benefit-icon">‚ù§Ô∏è</span>
          <div class="benefit-content">
            <h4>Lista de Favoritos</h4>
            <p>Salve suas s√©ries preferidas para assistir depois</p>
          </div>
        </div>

        <div class="benefit-item">
          <span class="benefit-icon">üí¨</span>
          <div class="benefit-content">
            <h4>Comunidade Ativa</h4>
            <p>Participe de discuss√µes e avalie s√©ries</p>
          </div>
        </div>

        <div class="benefit-item">
          <span class="benefit-icon">üéØ</span>
          <div class="benefit-content">
            <h4>Recomenda√ß√µes Personalizadas</h4>
            <p>Descubra novas s√©ries baseadas no seu gosto</p>
          </div>
        </div>
      </div>

      <div class="security-notice">
        <div class="notice-icon">üõ°Ô∏è</div>
        <div class="notice-content">
          <h4>Seguran√ßa Garantida</h4>
          <p>Seus dados est√£o protegidos com criptografia avan√ßada</p>
        </div>
      </div>
    </aside>
  </div>
</main>

<!-- Modal de Sucesso -->
<dialog id="successModal" class="success-modal" aria-labelledby="success-title">
  <div class="modal-content">
    <div class="success-header">
      <span class="success-icon">üéâ</span>
      <h3 id="success-title" class="success-title">
        Conta Criada com Sucesso!
      </h3>
    </div>

    <div class="success-body">
      <p>
        Bem-vindo(a) √† Plataforma S√©ries TV,
        <strong id="welcomeUsername"></strong>!
      </p>
      <div class="success-features">
        <div class="feature-highlight">
          <span class="highlight-icon">üìß</span>
          <span class="highlight-text">Enviamos um email de confirma√ß√£o</span>
        </div>
        <div class="feature-highlight">
          <span class="highlight-icon">‚ö°</span>
          <span class="highlight-text">Sua conta est√° pronta para uso</span>
        </div>
        <div class="feature-highlight">
          <span class="highlight-icon">üîç</span>
          <span class="highlight-text">Comece explorando nosso cat√°logo</span>
        </div>
      </div>
    </div>

    <div class="success-actions">
      <button
        type="button"
        class="btn btn--primary"
        onclick="redirectToDashboard()"
      >
        <span class="btn-icon">üöÄ</span>
        Explorar Plataforma
      </button>
      <button
        type="button"
        class="btn btn--outline"
        onclick="redirectToProfile()"
      >
        <span class="btn-icon">üë§</span>
        Completar Perfil
      </button>
    </div>
  </div>
</dialog>
{% endblock %} {% block extra_scripts %}
<script>
  // Configura√ß√£o do formul√°rio de registro
  const REGISTER_CONFIG = {
    isSubmitting: false,
    passwordStrength: {
      minLength: 8,
      requirements: ["length", "lowercase", "uppercase", "number", "special"],
    },
  };

  // Inicializa√ß√£o
  document.addEventListener("DOMContentLoaded", function () {
    initializeRegisterForm();
    setupPasswordStrength();
    setupFormValidation();
    setupPasswordToggle();
  });

  // Inicializa√ß√£o do formul√°rio
  function initializeRegisterForm() {
    // Adicionar classes e placeholders aos campos do Django
    styleDjangoFields();

    // Configurar valida√ß√£o em tempo real
    setupRealTimeValidation();

    // Configurar evento de submit
    const registerForm = document.querySelector(".register-form");
    if (registerForm) {
      registerForm.addEventListener("submit", handleFormSubmit);
    }
  }

  // For√ßa da senha
  function setupPasswordStrength() {
    const passwordField = document.getElementById(
      "{{ form.password1.id_for_label }}"
    );
    if (!passwordField) return;

    passwordField.addEventListener("input", function () {
      checkPasswordStrength(this.value);
    });
  }

  function checkPasswordStrength(password) {
    const strengthValue = document.getElementById("strengthValue");
    const strengthFill = document.getElementById("strengthFill");
    const requirements = REGISTER_CONFIG.passwordStrength.requirements;

    let score = 0;
    const checks = {
      length: password.length >= REGISTER_CONFIG.passwordStrength.minLength,
      lowercase: /[a-z]/.test(password),
      uppercase: /[A-Z]/.test(password),
      number: /[0-9]/.test(password),
      special: /[^A-Za-z0-9]/.test(password),
    };

    // Calcular score
    requirements.forEach((req) => {
      if (checks[req]) score++;
    });

    // Atualizar UI
    const percentage = (score / requirements.length) * 100;
    strengthFill.style.width = percentage + "%";

    // Atualizar texto e cor
    let strengthText, strengthClass;
    if (score === 0) {
      strengthText = "Muito Fraca";
      strengthClass = "very-weak";
    } else if (score <= 2) {
      strengthText = "Fraca";
      strengthClass = "weak";
    } else if (score <= 3) {
      strengthText = "M√©dia";
      strengthClass = "medium";
    } else if (score <= 4) {
      strengthText = "Forte";
      strengthClass = "strong";
    } else {
      strengthText = "Muito Forte";
      strengthClass = "very-strong";
    }

    strengthValue.textContent = strengthText;
    strengthFill.className = "strength-fill " + strengthClass;

    // Atualizar requisitos
    updateRequirementsUI(checks);
  }

  function updateRequirementsUI(checks) {
    const requirements = document.querySelectorAll(".requirement");
    requirements.forEach((req) => {
      const requirementType = req.dataset.requirement;
      const icon = req.querySelector(".requirement-icon");

      if (checks[requirementType]) {
        req.classList.add("met");
        icon.textContent = "‚úÖ";
      } else {
        req.classList.remove("met");
        icon.textContent = getRequirementIcon(requirementType);
      }
    });
  }

  function getRequirementIcon(requirement) {
    const icons = {
      length: "‚è≥",
      lowercase: "üî°",
      uppercase: "üî†",
      number: "üî¢",
      special: "‚ö°",
    };
    return icons[requirement] || "‚ö°";
  }

  // Valida√ß√£o do formul√°rio
  function setupFormValidation() {
    // Valida√ß√£o em tempo real do username
    const usernameField = document.getElementById(
      "{{ form.username.id_for_label }}"
    );
    if (usernameField) {
      usernameField.addEventListener("blur", function () {
        validateUsername(this.value);
      });
    }

    // Valida√ß√£o de email
    const emailField = document.getElementById("{{ form.email.id_for_label }}");
    if (emailField) {
      emailField.addEventListener("blur", function () {
        validateEmail(this.value);
      });
    }

    // Valida√ß√£o de confirma√ß√£o de senha
    const password2Field = document.getElementById(
      "{{ form.password2.id_for_label }}"
    );
    if (password2Field) {
      password2Field.addEventListener("input", function () {
        validatePasswordConfirmation();
      });
    }
  }

  function validateUsername(value) {
    const errorElement = document.getElementById("username-error");
    const field = document.getElementById("{{ form.username.id_for_label }}");

    if (value.length < 3) {
      showFieldError(field, errorElement, "M√≠nimo 3 caracteres");
      return false;
    }

    if (value.length > 150) {
      showFieldError(field, errorElement, "M√°ximo 150 caracteres");
      return false;
    }

    if (!/^[\w.@+-]+$/.test(value)) {
      showFieldError(field, errorElement, "Caracteres inv√°lidos");
      return false;
    }

    clearFieldError(field, errorElement);
    return true;
  }

  function validateEmail(value) {
    const errorElement = document.getElementById("email-error");
    const field = document.getElementById("{{ form.email.id_for_label }}");

    if (!value) {
      showFieldError(field, errorElement, "Email √© obrigat√≥rio");
      return false;
    }

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
      showFieldError(field, errorElement, "Email inv√°lido");
      return false;
    }

    clearFieldError(field, errorElement);
    return true;
  }

  function validatePasswordConfirmation() {
    const password1 = document.getElementById(
      "{{ form.password1.id_for_label }}"
    ).value;
    const password2 = document.getElementById(
      "{{ form.password2.id_for_label }}"
    ).value;
    const errorElement = document.getElementById("password2-error");
    const field = document.getElementById("{{ form.password2.id_for_label }}");

    if (password1 && password2 && password1 !== password2) {
      showFieldError(field, errorElement, "As senhas n√£o coincidem");
      return false;
    }

    clearFieldError(field, errorElement);
    return true;
  }

  // Toggle de senha
  function setupPasswordToggle() {
    const toggleButtons = document.querySelectorAll(".password-toggle");

    toggleButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const targetId = this.dataset.target;
        const passwordField = document.getElementById(targetId);
        const toggleIcon = this.querySelector(".toggle-icon");

        if (passwordField && toggleIcon) {
          if (passwordField.type === "password") {
            passwordField.type = "text";
            toggleIcon.textContent = "üôà";
          } else {
            passwordField.type = "password";
            toggleIcon.textContent = "üëÅÔ∏è";
          }
        }
      });
    });
  }

  // Manipula√ß√£o do submit
  function handleFormSubmit(event) {
    event.preventDefault();

    if (REGISTER_CONFIG.isSubmitting) {
      return;
    }

    // Validar todos os campos
    const isFormValid = validateAllFields();

    if (!isFormValid) {
      showToast("Por favor, corrija os erros antes de continuar", "error");
      return;
    }

    // Mostrar estado de carregamento
    setRegisterState("loading");
    REGISTER_CONFIG.isSubmitting = true;

    // Simular envio (substituir pelo envio real)
    simulateRegistration();
  }

  function validateAllFields() {
    const usernameValid = validateUsername(
      document.getElementById("{{ form.username.id_for_label }}").value
    );
    const emailValid = validateEmail(
      document.getElementById("{{ form.email.id_for_label }}").value
    );
    const passwordValid = validatePasswordConfirmation();
    const termsAccepted = document.getElementById("agree_terms").checked;

    if (!termsAccepted) {
      const termsError = document.getElementById("terms-error");
      termsError.style.display = "block";
      termsError.innerHTML =
        '<span class="error-icon">‚ùå</span>Voc√™ deve aceitar os termos de uso';
      return false;
    } else {
      document.getElementById("terms-error").style.display = "none";
    }

    return usernameValid && emailValid && passwordValid;
  }

  function setRegisterState(state) {
    const registerButton = document.getElementById("registerButton");
    const buttonText = registerButton.querySelector(".btn-text");
    const buttonIcon = registerButton.querySelector(".btn-icon");
    const buttonLoading = registerButton.querySelector(".btn-loading");

    switch (state) {
      case "loading":
        registerButton.disabled = true;
        buttonText.textContent = "Criando Conta...";
        buttonIcon.style.display = "none";
        buttonLoading.style.display = "inline";
        break;

      case "success":
        registerButton.disabled = false;
        buttonText.textContent = "Conta Criada!";
        buttonIcon.textContent = "‚úÖ";
        buttonIcon.style.display = "inline";
        buttonLoading.style.display = "none";
        break;

      case "error":
        registerButton.disabled = false;
        buttonText.textContent = "Tentar Novamente";
        buttonIcon.textContent = "üöÄ";
        buttonIcon.style.display = "inline";
        buttonLoading.style.display = "none";
        break;
    }
  }

  function simulateRegistration() {
    // Simular delay de rede
    setTimeout(() => {
      setRegisterState("success");
      showSuccessModal();

      // Redirecionar ap√≥s sucesso
      setTimeout(() => {
        window.location.href = "{% url 'series:home' %}";
      }, 3000);
    }, 2000);
  }

  function showSuccessModal() {
    const username = document.getElementById(
      "{{ form.username.id_for_label }}"
    ).value;
    document.getElementById("welcomeUsername").textContent = username;

    const successModal = document.getElementById("successModal");
    if (successModal && typeof successModal.showModal === "function") {
      successModal.showModal();
    }
  }

  // Fun√ß√µes de utilidade
  function showFieldError(field, errorElement, message) {
    if (field && errorElement) {
      field.classList.add("error");
      errorElement.innerHTML = `<span class="error-icon">‚ùå</span>${message}`;
      errorElement.style.display = "block";
    }
  }

  function clearFieldError(field, errorElement) {
    if (field && errorElement) {
      field.classList.remove("error");
      errorElement.style.display = "none";
    }
  }

  function showToast(message, type = "info") {
    // Implementar sistema de toast
    console.log(`${type}: ${message}`);
  }

  function styleDjangoFields() {
    // Aplicar estilos consistentes aos campos do Django
    const fields = [
      "{{ form.username.id_for_label }}",
      "{{ form.first_name.id_for_label }}",
      "{{ form.last_name.id_for_label }}",
      "{{ form.email.id_for_label }}",
      "{{ form.password1.id_for_label }}",
      "{{ form.password2.id_for_label }}",
    ];

    fields.forEach((fieldId) => {
      const field = document.getElementById(fieldId);
      if (field) {
        field.classList.add("field-input");
      }
    });
  }

  // Exportar fun√ß√µes globais
  window.RegisterManager = {
    checkPasswordStrength,
    validateAllFields,
  };
</script>
{% endblock %}
