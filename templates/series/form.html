<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Nova S√©rie - Plataforma S√©ries TV</title>
    <meta name="description" content="Adicione uma nova s√©rie ao cat√°logo da Plataforma S√©ries TV. Preencha as informa√ß√µes b√°sicas, adicione uma imagem e compartilhe com a comunidade.">
    <meta name="robots" content="noindex, nofollow">
       <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Seus outros links CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
</head>
</head>
<body>
    <!-- Header com Navega√ß√£o -->
    <header class="site-header" role="banner">
        <nav class="main-navigation" aria-label="Navega√ß√£o principal">
            <div class="nav-container">
                <a href="/home" class="site-logo">
                    <span class="logo-icon">üì∫</span>
                    <span class="logo-text">S√©ries TV</span>
                </a>
                
                <div class="nav-menu">
                    <a href="/home" class="nav-link">In√≠cio</a>
                    <a href="/catalogo" class="nav-link">Cat√°logo</a>
                    <a href="/generos" class="nav-link">G√™neros</a>
                    <a href="/favoritos" class="nav-link">Favoritos</a>
                    <a href="/perfil" class="nav-link">Perfil</a>
                </div>
                
                <div class="nav-actions">
                    <button class="search-toggle" aria-label="Abrir busca">
                        <span class="search-icon">üîç</span>
                    </button>
                    <div class="user-menu">
                        <button class="user-avatar" aria-label="Menu do usu√°rio">
                            <span class="avatar-text">AU</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb-nav" aria-label="Navega√ß√£o estrutural">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="/home" class="breadcrumb-link">
                        <span class="breadcrumb-icon">üè†</span>
                        In√≠cio
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="/catalogo" class="breadcrumb-link">
                        <span class="breadcrumb-icon">üì∫</span>
                        Cat√°logo
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="/admin/series" class="breadcrumb-link">
                        <span class="breadcrumb-icon">‚öôÔ∏è</span>
                        Gerenciar S√©ries
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    <span class="breadcrumb-icon">‚ûï</span>
                    Criar Nova S√©rie
                </li>
            </ol>
        </div>
    </nav>

    <!-- Conte√∫do Principal -->
    <main class="series-form" role="main">
        <div class="container">
            <!-- Cabe√ßalho da P√°gina -->
            <header class="page-header">
                <div class="header-content">
                    <h1 class="page-title">
                        <span class="title-icon">‚ûï</span>
                        Criar Nova S√©rie
                    </h1>
                    <p class="page-subtitle">
                        Adicione uma nova s√©rie ao cat√°logo da plataforma. Preencha todas as informa√ß√µes necess√°rias para que outros usu√°rios possam descobrir e avaliar o conte√∫do.
                    </p>
                </div>
                
                <!-- Progresso do Formul√°rio -->
                <div class="form-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="step active">
                            <span class="step-number">1</span>
                            <span class="step-label">Informa√ß√µes B√°sicas</span>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <span class="step-label">Detalhes</span>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <span class="step-label">M√≠dia</span>
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <span class="step-label">Revis√£o</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Formul√°rio Principal -->
            <div class="form-container">
                <form method="post" action="/series/criar" enctype="multipart/form-data" class="series-creation-form" novalidate>
                    <input type="hidden" name="csrf_token" value="abc123xyz">
                    
                    <!-- Se√ß√£o: Informa√ß√µes B√°sicas -->
                    <section class="form-section active" data-step="1" aria-labelledby="basic-info-title">
                        <header class="section-header">
                            <h2 id="basic-info-title" class="section-title">
                                <span class="section-icon">üìù</span>
                                Informa√ß√µes B√°sicas
                            </h2>
                            <p class="section-subtitle">Dados principais que identificam a s√©rie</p>
                        </header>

                        <div class="form-grid">
                            <!-- Campo T√≠tulo -->
                            <div class="form-field form-field--full">
                                <label for="titulo" class="field-label required">
                                    <span class="label-icon">üì∫</span>
                                    T√≠tulo da S√©rie
                                </label>
                                <div class="field-wrapper">
                                    <input type="text" 
                                           id="titulo" 
                                           name="titulo" 
                                           class="field-input"
                                           placeholder="Digite o t√≠tulo da s√©rie..."
                                           required
                                           maxlength="200"
                                           autocomplete="off"
                                           aria-describedby="titulo-help titulo-error">
                                    <div class="field-counter">
                                        <span class="counter-current">0</span>/<span class="counter-max">200</span>
                                    </div>
                                </div>
                                <small id="titulo-help" class="field-help">
                                    Use o t√≠tulo original da s√©rie. Evite abrevia√ß√µes desnecess√°rias.
                                </small>
                                <div id="titulo-error" class="field-error" role="alert" aria-live="polite"></div>
                            </div>

                            <!-- Campo Ano e G√™nero -->
                            <div class="form-field">
                                <label for="ano" class="field-label required">
                                    <span class="label-icon">üìÖ</span>
                                    Ano de Estreia
                                </label>
                                <div class="field-wrapper">
                                    <input type="number" 
                                           id="ano" 
                                           name="ano" 
                                           class="field-input"
                                           placeholder="AAAA"
                                           required
                                           min="1900"
                                           max="2030"
                                           aria-describedby="ano-help ano-error">
                                </div>
                                <small id="ano-help" class="field-help">
                                    Ano da primeira exibi√ß√£o da s√©rie.
                                </small>
                                <div id="ano-error" class="field-error" role="alert" aria-live="polite"></div>
                            </div>

                            <div class="form-field">
                                <label for="genero" class="field-label required">
                                    <span class="label-icon">üé≠</span>
                                    G√™nero Principal
                                </label>
                                <div class="field-wrapper">
                                    <select id="genero" 
                                            name="genero" 
                                            class="field-select"
                                            required
                                            aria-describedby="genero-help genero-error">
                                        <option value="">Selecione o g√™nero...</option>
                                        <option value="acao">A√ß√£o</option>
                                        <option value="animacao">Anima√ß√£o</option>
                                        <option value="aventura">Aventura</option>
                                        <option value="biografia">Biografia</option>
                                        <option value="comedia">Com√©dia</option>
                                        <option value="crime">Crime</option>
                                        <option value="documentario">Document√°rio</option>
                                        <option value="drama">Drama</option>
                                        <option value="familia">Fam√≠lia</option>
                                        <option value="fantasia">Fantasia</option>
                                        <option value="ficcao_cientifica">Fic√ß√£o Cient√≠fica</option>
                                        <option value="guerra">Guerra</option>
                                        <option value="historia">Hist√≥ria</option>
                                        <option value="horror">Horror</option>
                                        <option value="musical">Musical</option>
                                        <option value="misterio">Mist√©rio</option>
                                        <option value="romance">Romance</option>
                                        <option value="suspense">Suspense</option>
                                        <option value="terror">Terror</option>
                                        <option value="western">Western</option>
                                    </select>
                                    <span class="select-arrow" aria-hidden="true">‚ñº</span>
                                </div>
                                <small id="genero-help" class="field-help">
                                    Escolha o g√™nero que melhor descreve a s√©rie.
                                </small>
                                <div id="genero-error" class="field-error" role="alert" aria-live="polite"></div>
                            </div>
                        </div>
                    </section>

                    <!-- Se√ß√£o: Detalhes -->
                    <section class="form-section" data-step="2" aria-labelledby="details-title">
                        <header class="section-header">
                            <h2 id="details-title" class="section-title">
                                <span class="section-icon">üìã</span>
                                Detalhes da S√©rie
                            </h2>
                            <p class="section-subtitle">Informa√ß√µes descritivas e contextuais</p>
                        </header>

                        <div class="form-grid">
                            <!-- Campo Descri√ß√£o -->
                            <div class="form-field form-field--full">
                                <label for="descricao" class="field-label required">
                                    <span class="label-icon">üìÑ</span>
                                    Descri√ß√£o/Sinopse
                                </label>
                                <div class="field-wrapper">
                                    <textarea id="descricao" 
                                              name="descricao" 
                                              class="field-textarea"
                                              placeholder="Descreva a s√©rie, sua trama principal, personagens principais e contexto..."
                                              required
                                              rows="6"
                                              maxlength="1000"
                                              aria-describedby="descricao-help descricao-error"></textarea>
                                    <div class="field-counter">
                                        <span class="counter-current">0</span>/<span class="counter-max">1000</span>
                                    </div>
                                </div>
                                <small id="descricao-help" class="field-help">
                                    Escreva uma sinopse completa que desperte o interesse. Inclua trama, personagens principais e tom da s√©rie.
                                </small>
                                <div id="descricao-error" class="field-error" role="alert" aria-live="polite"></div>
                            </div>

                            <!-- Campos Adicionais -->
                            <div class="form-field">
                                <label for="pais_origem" class="field-label">
                                    <span class="label-icon">üåç</span>
                                    Pa√≠s de Origem
                                </label>
                                <div class="field-wrapper">
                                    <select id="pais_origem" name="pais_origem" class="field-select" aria-describedby="pais-help">
                                        <option value="">Selecione o pa√≠s...</option>
                                        <option value="BR">Brasil</option>
                                        <option value="US">Estados Unidos</option>
                                        <option value="UK">Reino Unido</option>
                                        <option value="CA">Canad√°</option>
                                        <option value="DE">Alemanha</option>
                                        <option value="FR">Fran√ßa</option>
                                        <option value="ES">Espanha</option>
                                        <option value="IT">It√°lia</option>
                                        <option value="JP">Jap√£o</option>
                                        <option value="KR">Coreia do Sul</option>
                                        <option value="AU">Austr√°lia</option>
                                        <option value="MX">M√©xico</option>
                                        <option value="AR">Argentina</option>
                                        <option value="OTHER">Outro</option>
                                    </select>
                                    <span class="select-arrow" aria-hidden="true">‚ñº</span>
                                </div>
                                <small id="pais-help" class="field-help">Pa√≠s onde a s√©rie foi originalmente produzida.</small>
                            </div>

                            <div class="form-field">
                                <label for="idioma_original" class="field-label">
                                    <span class="label-icon">üó£Ô∏è</span>
                                    Idioma Original
                                </label>
                                <div class="field-wrapper">
                                    <select id="idioma_original" name="idioma_original" class="field-select" aria-describedby="idioma-help">
                                        <option value="">Selecione o idioma...</option>
                                        <option value="pt">Portugu√™s</option>
                                        <option value="en">Ingl√™s</option>
                                        <option value="es">Espanhol</option>
                                        <option value="fr">Franc√™s</option>
                                        <option value="de">Alem√£o</option>
                                        <option value="it">Italiano</option>
                                        <option value="ja">Japon√™s</option>
                                        <option value="ko">Coreano</option>
                                        <option value="zh">Chin√™s</option>
                                        <option value="ru">Russo</option>
                                        <option value="other">Outro</option>
                                    </select>
                                    <span class="select-arrow" aria-hidden="true">‚ñº</span>
                                </div>
                                <small id="idioma-help" class="field-help">Idioma principal falado na s√©rie.</small>
                            </div>

                            <div class="form-field">
                                <label for="status" class="field-label">
                                    <span class="label-icon">üìä</span>
                                    Status da S√©rie
                                </label>
                                <div class="field-wrapper">
                                    <select id="status" name="status" class="field-select" aria-describedby="status-help">
                                        <option value="">Selecione o status...</option>
                                        <option value="em_exibicao">Em Exibi√ß√£o</option>
                                        <option value="finalizada">Finalizada</option>
                                        <option value="cancelada">Cancelada</option>
                                        <option value="hiato">Em Hiato</option>
                                        <option value="anunciada">Anunciada</option>
                                    </select>
                                    <span class="select-arrow" aria-hidden="true">‚ñº</span>
                                </div>
                                <small id="status-help" class="field-help">Status atual da produ√ß√£o da s√©rie.</small>
                            </div>

                            <div class="form-field">
                                <label for="classificacao_etaria" class="field-label">
                                    <span class="label-icon">üîû</span>
                                    Classifica√ß√£o Et√°ria
                                </label>
                                <div class="field-wrapper">
                                    <select id="classificacao_etaria" name="classificacao_etaria" class="field-select" aria-describedby="classificacao-help">
                                        <option value="">Selecione a classifica√ß√£o...</option>
                                        <option value="livre">Livre</option>
                                        <option value="10">10 anos</option>
                                        <option value="12">12 anos</option>
                                        <option value="14">14 anos</option>
                                        <option value="16">16 anos</option>
                                        <option value="18">18 anos</option>
                                    </select>
                                    <span class="select-arrow" aria-hidden="true">‚ñº</span>
                                </div>
                                <small id="classificacao-help" class="field-help">Classifica√ß√£o indicativa da s√©rie.</small>
                            </div>
                        </div>
                    </section>

                    <!-- Se√ß√£o: M√≠dia -->
                    <section class="form-section" data-step="3" aria-labelledby="media-title">
                        <header class="section-header">
                            <h2 id="media-title" class="section-title">
                                <span class="section-icon">üñºÔ∏è</span>
                                M√≠dia e Imagens
                            </h2>
                            <p class="section-subtitle">Adicione imagens que representem visualmente a s√©rie</p>
                        </header>

                        <div class="form-grid">
                            <!-- Upload de Poster -->
                            <div class="form-field form-field--full">
                                <label for="imagem_poster" class="field-label required">
                                    <span class="label-icon">üñºÔ∏è</span>
                                    Poster Principal
                                </label>
                                
                                <div class="file-upload-area" id="posterUploadArea">
                                    <input type="file" 
                                           id="imagem_poster" 
                                           name="imagem_poster" 
                                           class="file-input"
                                           accept="image/jpeg,image/jpg,image/png,image/webp"
                                           aria-describedby="poster-help poster-error">
                                    
                                    <div class="upload-placeholder" id="posterPlaceholder">
                                        <div class="upload-icon">üì∑</div>
                                        <div class="upload-text">
                                            <p class="upload-primary">Clique para adicionar o poster</p>
                                            <p class="upload-secondary">ou arraste e solte aqui</p>
                                        </div>
                                        <div class="upload-specs">
                                            JPG, PNG, WEBP ‚Ä¢ M√°x. 10MB ‚Ä¢ Propor√ß√£o recomendada: 2:3
                                        </div>
                                    </div>
                                    
                                    <div class="upload-preview" id="posterPreview" style="display: none;">
                                        <img id="posterPreviewImg" alt="Preview do poster" class="preview-image">
                                        <div class="preview-overlay">
                                            <button type="button" class="preview-remove" onclick="removeUpload('poster')" aria-label="Remover imagem">
                                                üóëÔ∏è
                                            </button>
                                            <button type="button" class="preview-edit" onclick="editUpload('poster')" aria-label="Editar imagem">
                                                ‚úèÔ∏è
                                            </button>
                                        </div>
                                        <div class="preview-info">
                                            <span class="file-name" id="posterFileName"></span>
                                            <span class="file-size" id="posterFileSize"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <small id="poster-help" class="field-help">
                                    Imagem principal da s√©rie que aparecer√° no cat√°logo. Use uma imagem de alta qualidade com propor√ß√£o 2:3 (altura maior que largura).
                                </small>
                                <div id="poster-error" class="field-error" role="alert" aria-live="polite"></div>
                            </div>

                            <!-- Upload de Backdrop (Opcional) -->
                            <div class="form-field form-field--full">
                                <label for="imagem_backdrop" class="field-label">
                                    <span class="label-icon">üåÖ</span>
                                    Imagem de Fundo (Opcional)
                                </label>
                                
                                <div class="file-upload-area" id="backdropUploadArea">
                                    <input type="file" 
                                           id="imagem_backdrop" 
                                           name="imagem_backdrop" 
                                           class="file-input"
                                           accept="image/jpeg,image/jpg,image/png,image/webp"
                                           aria-describedby="backdrop-help">
                                    
                                    <div class="upload-placeholder" id="backdropPlaceholder">
                                        <div class="upload-icon">üé¨</div>
                                        <div class="upload-text">
                                            <p class="upload-primary">Adicionar imagem de fundo</p>
                                            <p class="upload-secondary">Imagem panor√¢mica da s√©rie</p>
                                        </div>
                                        <div class="upload-specs">
                                            JPG, PNG, WEBP ‚Ä¢ M√°x. 10MB ‚Ä¢ Propor√ß√£o recomendada: 16:9
                                        </div>
                                    </div>
                                    
                                    <div class="upload-preview" id="backdropPreview" style="display: none;">
                                        <img id="backdropPreviewImg" alt="Preview do backdrop" class="preview-image preview-image--landscape">
                                        <div class="preview-overlay">
                                            <button type="button" class="preview-remove" onclick="removeUpload('backdrop')" aria-label="Remover imagem">
                                                üóëÔ∏è
                                            </button>
                                            <button type="button" class="preview-edit" onclick="editUpload('backdrop')" aria-label="Editar imagem">
                                                ‚úèÔ∏è
                                            </button>
                                        </div>
                                        <div class="preview-info">
                                            <span class="file-name" id="backdropFileName"></span>
                                            <span class="file-size" id="backdropFileSize"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <small id="backdrop-help" class="field-help">
                                    Imagem panor√¢mica que ser√° usada como fundo na p√°gina de detalhes. Use propor√ß√£o 16:9 para melhor resultado.
                                </small>
                            </div>
                        </div>
                    </section>

                    <!-- Se√ß√£o: Revis√£o -->
                    <section class="form-section" data-step="4" aria-labelledby="review-title">
                        <header class="section-header">
                            <h2 id="review-title" class="section-title">
                                <span class="section-icon">üëÄ</span>
                                Revis√£o Final
                            </h2>
                            <p class="section-subtitle">Confira todas as informa√ß√µes antes de publicar</p>
                        </header>

                        <!-- Preview Card -->
                        <div class="review-preview">
                            <h3 class="preview-title">Preview da S√©rie</h3>
                            
                            <div class="preview-card">
                                <div class="preview-poster">
                                    <div class="poster-placeholder" id="reviewPosterPreview">
                                        <span class="placeholder-icon">üì∫</span>
                                        <span class="placeholder-text">Poster da s√©rie</span>
                                    </div>
                                </div>
                                
                                <div class="preview-content">
                                    <h4 class="preview-series-title" id="reviewTitle">T√≠tulo da s√©rie aparecer√° aqui</h4>
                                    
                                    <div class="preview-meta">
                                        <span class="preview-genre" id="reviewGenre">G√™nero</span>
                                        <span class="preview-year" id="reviewYear">Ano</span>
                                        <span class="preview-status" id="reviewStatus">Status</span>
                                    </div>
                                    
                                    <p class="preview-description" id="reviewDescription">
                                        A descri√ß√£o da s√©rie aparecer√° aqui conforme voc√™ digita...
                                    </p>
                                    
                                    <div class="preview-details">
                                        <div class="detail-row">
                                            <span class="detail-key">Pa√≠s:</span>
                                            <span class="detail-value" id="reviewPais">‚Äî</span>
                                        </div>
                                        <div class="detail-row">
                                            <span class="detail-key">Idioma:</span>
                                            <span class="detail-value" id="reviewIdioma">‚Äî</span>
                                        </div>
                                        <div class="detail-row">
                                            <span class="detail-key">Classifica√ß√£o:</span>
                                            <span class="detail-value" id="reviewClassificacao">‚Äî</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Valida√ß√£o Final -->
                        <div class="validation-checklist">
                            <h3 class="checklist-title">Lista de Verifica√ß√£o</h3>
                            
                            <div class="checklist-items">
                                <div class="checklist-item" id="check-titulo">
                                    <span class="check-icon">‚è≥</span>
                                    <span class="check-text">T√≠tulo preenchido e claro</span>
                                </div>
                                <div class="checklist-item" id="check-descricao">
                                    <span class="check-icon">‚è≥</span>
                                    <span class="check-text">Descri√ß√£o completa (m√≠nimo 50 caracteres)</span>
                                </div>
                                <div class="checklist-item" id="check-ano">
                                    <span class="check-icon">‚è≥</span>
                                    <span class="check-text">Ano v√°lido informado</span>
                                </div>
                                <div class="checklist-item" id="check-genero">
                                    <span class="check-icon">‚è≥</span>
                                    <span class="check-text">G√™nero selecionado</span>
                                </div>
                                <div class="checklist-item" id="check-poster">
                                    <span class="check-icon">‚è≥</span>
                                    <span class="check-text">Poster principal adicionado</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Navega√ß√£o entre Se√ß√µes -->
                    <div class="form-navigation">
                        <button type="button" class="btn btn--secondary btn--nav" id="prevBtn" style="display: none;">
                            <span class="btn-icon">‚Üê</span>
                            Anterior
                        </button>
                        
                        <div class="nav-spacer"></div>
                        
                        <button type="button" class="btn btn--outline btn--nav" id="saveAsDraftBtn">
                            <span class="btn-icon">üìÑ</span>
                            Salvar Rascunho
                        </button>
                        
                        <button type="button" class="btn btn--primary btn--nav" id="nextBtn">
                            Pr√≥ximo
                            <span class="btn-icon">‚Üí</span>
                        </button>
                        
                        <button type="submit" class="btn btn--success btn--nav" id="submitBtn" style="display: none;">
                            <span class="btn-icon">‚úÖ</span>
                            Criar S√©rie
                        </button>
                    </div>

                    <!-- A√ß√µes Secund√°rias -->
                    <div class="secondary-actions">
                        <a href="/catalogo" class="btn btn--ghost">
                            <span class="btn-icon">‚Ü©Ô∏è</span>
                            Cancelar e Voltar
                        </a>
                        
                        <button type="button" class="btn btn--ghost" onclick="resetForm()">
                            <span class="btn-icon">üîÑ</span>
                            Limpar Formul√°rio
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Modal de Confirma√ß√£o de Sa√≠da -->
    <dialog id="exitConfirmModal" class="confirmation-modal" aria-labelledby="exit-title">
        <div class="modal-content">
            <h3 id="exit-title" class="modal-title">
                <span class="modal-icon">‚ö†Ô∏è</span>
                Sair sem Salvar?
            </h3>
            
            <div class="modal-body">
                <p>Voc√™ tem altera√ß√µes n√£o salvas. Deseja realmente sair?</p>
                <p class="modal-note">Todas as informa√ß√µes preenchidas ser√£o perdidas.</p>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn btn--secondary" onclick="document.getElementById('exitConfirmModal').close()">
                    Continuar Editando
                </button>
                <button type="button" class="btn btn--outline" onclick="saveAsDraft()">
                    Salvar Rascunho
                </button>
                <button type="button" class="btn btn--danger" onclick="confirmExit()">
                    Sair sem Salvar
                </button>
            </div>
        </div>
    </dialog>

    <!-- Modal de Sucesso -->
    <dialog id="successModal" class="success-modal" aria-labelledby="success-title">
        <div class="modal-content">
            <h3 id="success-title" class="modal-title">
                <span class="modal-icon">üéâ</span>
                S√©rie Criada com Sucesso!
            </h3>
            
            <div class="modal-body">
                <p>A s√©rie <strong id="createdSeriesTitle"></strong> foi adicionada ao cat√°logo.</p>
                <div class="success-actions">
                    <a href="#" id="viewSer<div class="success-actions">
    <a href="#" id="viewSeriesLink" class="btn btn--primary">
        <span class="btn-icon">üëÅÔ∏è</span>
        Ver S√©rie
    </a>
    <a href="/series/criar" class="btn btn--outline">
        <span class="btn-icon">‚ûï</span>
        Criar Outra S√©rie
    </a>
    <a href="/catalogo" class="btn btn--ghost">
        <span class="btn-icon">üì∫</span>
        Voltar ao Cat√°logo
    </a>
</div>
</div>
</dialog>

<!-- Modal de Erro -->
<dialog id="errorModal" class="error-modal" aria-labelledby="error-title">
    <div class="modal-content">
        <h3 id="error-title" class="modal-title">
            <span class="modal-icon">‚ùå</span>
            Erro ao Criar S√©rie
        </h3>
        
        <div class="modal-body">
            <p id="errorMessage">Ocorreu um erro ao tentar criar a s√©rie. Por favor, tente novamente.</p>
            <div class="error-details" id="errorDetails" style="display: none;">
                <h4>Detalhes do Erro:</h4>
                <pre id="errorDetailsText"></pre>
            </div>
        </div>

        <div class="modal-actions">
            <button type="button" class="btn btn--secondary" onclick="document.getElementById('errorModal').close()">
                Fechar
            </button>
            <button type="button" class="btn btn--primary" onclick="retrySubmission()">
                <span class="btn-icon">üîÑ</span>
                Tentar Novamente
            </button>
            <button type="button" class="btn btn--outline" onclick="showErrorDetails()" id="showDetailsBtn">
                <span class="btn-icon">üîç</span>
                Ver Detalhes
            </button>
        </div>
    </div>
</dialog>

<!-- Modal de Confirma√ß√£o de Rascunho -->
<dialog id="draftConfirmModal" class="confirmation-modal" aria-labelledby="draft-title">
    <div class="modal-content">
        <h3 id="draft-title" class="modal-title">
            <span class="modal-icon">üíæ</span>
            Salvar como Rascunho?
        </h3>
        
        <div class="modal-body">
            <p>Deseja salvar as informa√ß√µes preenchidas como rascunho?</p>
            <p class="modal-note">Voc√™ poder√° continuar editando posteriormente.</p>
            
            <div class="draft-options">
                <label class="option-label">
                    <input type="checkbox" id="draftNotify" checked>
                    <span class="checkmark"></span>
                    Receber lembrete para completar amanh√£
                </label>
            </div>
        </div>

        <div class="modal-actions">
            <button type="button" class="btn btn--secondary" onclick="document.getElementById('draftConfirmModal').close()">
                Continuar Editando
            </button>
            <button type="button" class="btn btn--outline" onclick="saveDraft(false)">
                Salvar sem Lembrete
            </button>
            <button type="button" class="btn btn--primary" onclick="saveDraft(true)">
                <span class="btn-icon">üíæ</span>
                Salvar Rascunho
            </button>
        </div>
    </div>
</dialog>

<!-- Modal de Carregamento -->
<dialog id="loadingModal" class="loading-modal" aria-labelledby="loading-title">
    <div class="modal-content">
        <h3 id="loading-title" class="modal-title">
            <span class="modal-icon">‚è≥</span>
            Processando...
        </h3>
        
        <div class="modal-body">
            <p id="loadingMessage">Salvando suas informa√ß√µes...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="loadingProgress"></div>
            </div>
            <p class="modal-note">N√£o feche esta p√°gina.</p>
        </div>
    </div>
</dialog>

<!-- Footer da P√°gina -->
<footer class="page-footer page-footer--form" role="contentinfo">
    <div class="footer-content">
        <div class="footer-section">
            <h4 class="footer-title">Ajuda com o Formul√°rio</h4>
            <ul class="footer-links">
                <li><a href="/ajuda/formulario-series" class="footer-link">üìù Guia de Preenchimento</a></li>
                <li><a href="/ajuda/imagens" class="footer-link">üñºÔ∏è Requisitos de Imagem</a></li>
                <li><a href="/ajuda/categorizacao" class="footer-link">üè∑Ô∏è Como Categorizar</a></li>
            </ul>
        </div>
        
        <div class="footer-section">
            <h4 class="footer-title">Dicas R√°pidas</h4>
            <div class="tips-container">
                <div class="tip-item">
                    <span class="tip-icon">üí°</span>
                    <span class="tip-text">Use t√≠tulos originais para melhor busca</span>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üí°</span>
                    <span class="tip-text">Sinopses detalhadas aumentam engajamento</span>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üí°</span>
                    <span class="tip-text">Imagens de qualidade melhoram a experi√™ncia</span>
                </div>
            </div>
        </div>

        <div class="footer-section">
            <h4 class="footer-title">Suporte</h4>
            <div class="support-info">
                <div class="support-item">
                    <span class="support-icon">üïí</span>
                    <span class="support-text">Tempo m√©dio: 5-10 minutos</span>
                </div>
                <div class="support-item">
                    <span class="support-icon">üìû</span>
                    <a href="/suporte" class="support-link">Chat de Ajuda Online</a>
                </div>
                <div class="support-item">
                    <span class="support-icon">üìß</span>
                    <a href="mailto:suporte@seriestv.com" class="support-link">suporte@seriestv.com</a>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p class="footer-copyright">
            &copy; {% now "Y" %} Plataforma S√©ries TV. 
            <span class="footer-version">v{{ APP_VERSION }}</span>
        </p>
        <p class="footer-notice">
            Todas as s√©ries s√£o revisadas antes da publica√ß√£o.
            <span class="footer-status" id="formStatus">Formul√°rio n√£o salvo</span>
        </p>
    </div>
</footer>

<!-- Sistema de Notifica√ß√µes -->
<div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>

<!-- Fallback para JavaScript Desabilitado -->
<noscript>
    <div class="noscript-warning">
        <div class="warning-content">
            <h3>‚ö†Ô∏è JavaScript Necess√°rio</h3>
            <p>Este formul√°rio requer JavaScript para funcionar corretamente. Habilite o JavaScript para criar s√©ries.</p>
            <div class="warning-actions">
                <a href="/catalogo" class="btn btn--secondary">Voltar ao Cat√°logo</a>
                <a href="/ajuda/javascript" class="btn btn--outline">Como Habilitar JavaScript</a>
            </div>
        </div>
    </div>
</noscript>

</main>

<!-- Scripts JavaScript -->
<script>
// Configura√ß√£o global do formul√°rio
const FORM_CONFIG = {
    currentStep: 1,
    totalSteps: 4,
    hasUnsavedChanges: false,
    draftAutoSave: true,
    autoSaveInterval: 30000, // 30 segundos
    maxFileSize: 10 * 1024 * 1024, // 10MB
    allowedImageTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp']
};

// Inicializa√ß√£o do formul√°rio
document.addEventListener('DOMContentLoaded', function() {
    initializeForm();
    setupEventListeners();
    startAutoSave();
    setupFormValidation();
});

// Fun√ß√µes de inicializa√ß√£o
function initializeForm() {
    updateProgressBar();
    setupFileUploads();
    setupRealTimePreview();
    checkFormStatus();
}

function setupEventListeners() {
    // Navega√ß√£o entre steps
    document.getElementById('nextBtn').addEventListener('click', nextStep);
    document.getElementById('prevBtn').addEventListener('click', previousStep);
    document.getElementById('submitBtn').addEventListener('click', submitForm);
    
    // A√ß√µes secund√°rias
    document.getElementById('saveAsDraftBtn').addEventListener('click', showDraftModal);
    
    // Preven√ß√£o de sa√≠da acidental
    window.addEventListener('beforeunload', handleBeforeUnload);
    
    // Teclas de atalho
    document.addEventListener('keydown', handleKeyboardShortcuts);
}

// Navega√ß√£o entre steps
function nextStep() {
    if (validateCurrentStep()) {
        FORM_CONFIG.currentStep++;
        updateFormDisplay();
        updateProgressBar();
        
        if (FORM_CONFIG.currentStep === FORM_CONFIG.totalSteps) {
            updateReviewPreview();
            validateFinalChecklist();
        }
    }
}

function previousStep() {
    FORM_CONFIG.currentStep--;
    updateFormDisplay();
    updateProgressBar();
}

function updateFormDisplay() {
    // Esconder todas as se√ß√µes
    document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // Mostrar se√ß√£o atual
    const currentSection = document.querySelector(`[data-step="${FORM_CONFIG.currentStep}"]`);
    if (currentSection) {
        currentSection.classList.add('active');
    }
    
    // Atualizar bot√µes de navega√ß√£o
    updateNavigationButtons();
}

function updateNavigationButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    
    // Bot√£o Anterior
    if (FORM_CONFIG.currentStep > 1) {
        prevBtn.style.display = 'flex';
    } else {
        prevBtn.style.display = 'none';
    }
    
    // Bot√£o Pr√≥ximo/Submit
    if (FORM_CONFIG.currentStep < FORM_CONFIG.totalSteps) {
        nextBtn.style.display = 'flex';
        submitBtn.style.display = 'none';
    } else {
        nextBtn.style.display = 'none';
        submitBtn.style.display = 'flex';
    }
}

// Valida√ß√£o do formul√°rio
function validateCurrentStep() {
    const currentSection = document.querySelector(`[data-step="${FORM_CONFIG.currentStep}"]`);
    const requiredFields = currentSection.querySelectorAll('[required]');
    let isValid = true;
    
    requiredFields.forEach(field => {
        if (!field.value.trim()) {
            showFieldError(field, 'Este campo √© obrigat√≥rio');
            isValid = false;
        } else {
            clearFieldError(field);
        }
    });
    
    // Valida√ß√µes espec√≠ficas por step
    switch (FORM_CONFIG.currentStep) {
        case 1:
            isValid = validateStep1() && isValid;
            break;
        case 2:
            isValid = validateStep2() && isValid;
            break;
        case 3:
            isValid = validateStep3() && isValid;
            break;
    }
    
    if (!isValid) {
        showToast('Por favor, corrija os erros antes de continuar', 'error');
    }
    
    return isValid;
}

function validateStep1() {
    let isValid = true;
    const titulo = document.getElementById('titulo');
    const ano = document.getElementById('ano');
    const genero = document.getElementById('genero');
    
    // Validar t√≠tulo
    if (titulo.value.length < 2) {
        showFieldError(titulo, 'O t√≠tulo deve ter pelo menos 2 caracteres');
        isValid = false;
    }
    
    // Validar ano
    const currentYear = new Date().getFullYear();
    if (ano.value < 1900 || ano.value > currentYear + 5) {
        showFieldError(ano, `O ano deve estar entre 1900 e ${currentYear + 5}`);
        isValid = false;
    }
    
    return isValid;
}

// Sistema de upload de arquivos
function setupFileUploads() {
    setupFileUpload('poster');
    setupFileUpload('backdrop');
}

function setupFileUpload(type) {
    const uploadArea = document.getElementById(`${type}UploadArea`);
    const fileInput = document.getElementById(`imagem_${type}`);
    const placeholder = document.getElementById(`${type}Placeholder`);
    const preview = document.getElementById(`${type}Preview`);
    const previewImg = document.getElementById(`${type}PreviewImg`);
    const fileName = document.getElementById(`${type}FileName`);
    const fileSize = document.getElementById(`${type}FileSize`);
    
    if (!uploadArea || !fileInput) return;
    
    // Click para abrir file dialog
    uploadArea.addEventListener('click', () => fileInput.click());
    
    // Drag and drop
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        
        if (e.dataTransfer.files.length) {
            fileInput.files = e.dataTransfer.files;
            handleFileSelect(e.dataTransfer.files[0], type);
        }
    });
    
    // Change event
    fileInput.addEventListener('change', (e) => {
        if (e.target.files.length) {
            handleFileSelect(e.target.files[0], type);
        }
    });
}

function handleFileSelect(file, type) {
    // Validar arquivo
    if (!validateFile(file, type)) return;
    
    // Atualizar UI
    updateFilePreview(file, type);
    FORM_CONFIG.hasUnsavedChanges = true;
    updateFormStatus();
}

function validateFile(file, type) {
    // Validar tipo
    if (!FORM_CONFIG.allowedImageTypes.includes(file.type)) {
        showToast('Tipo de arquivo n√£o permitido. Use JPG, PNG ou WEBP.', 'error');
        return false;
    }
    
    // Validar tamanho
    if (file.size > FORM_CONFIG.maxFileSize) {
        showToast('Arquivo muito grande. M√°ximo 10MB permitido.', 'error');
        return false;
    }
    
    return true;
}

// Preview em tempo real
function setupRealTimePreview() {
    // T√≠tulo
    document.getElementById('titulo').addEventListener('input', function() {
        document.getElementById('reviewTitle').textContent = this.value || 'T√≠tulo da s√©rie aparecer√° aqui';
        updateChecklist('titulo', this.value.length >= 2);
    });
    
    // Descri√ß√£o
    document.getElementById('descricao').addEventListener('input', function() {
        document.getElementById('reviewDescription').textContent = this.value || 'A descri√ß√£o da s√©rie aparecer√° aqui conforme voc√™ digita...';
        updateChecklist('descricao', this.value.length >= 50);
    });
    
    // Ano
    document.getElementById('ano').addEventListener('input', function() {
        document.getElementById('reviewYear').textContent = this.value || 'Ano';
        updateChecklist('ano', this.value.length === 4 && this.value >= 1900);
    });
    
    // G√™nero
    document.getElementById('genero').addEventListener('change', function() {
        const selectedOption = this.options[this.selectedIndex];
        document.getElementById('reviewGenre').textContent = selectedOption.text || 'G√™nero';
        updateChecklist('genero', this.value !== '');
    });
}

function updateReviewPreview() {
    // Atualizar todos os campos do preview
    const fields = {
        'titulo': 'reviewTitle',
        'descricao': 'reviewDescription', 
        'ano': 'reviewYear',
        'genero': 'reviewGenre',
        'pais_origem': 'reviewPais',
        'idioma_original': 'reviewIdioma',
        'classificacao_etaria': 'reviewClassificacao',
        'status': 'reviewStatus'
    };
    
    for (const [fieldId, previewId] of Object.entries(fields)) {
        const field = document.getElementById(fieldId);
        const preview = document.getElementById(previewId);
        
        if (field && preview) {
            if (field.type === 'select-one') {
                const selectedOption = field.options[field.selectedIndex];
                preview.textContent = selectedOption.text || '‚Äî';
            } else {
                preview.textContent = field.value || '‚Äî';
            }
        }
    }
}

// Sistema de autosave
function startAutoSave() {
    if (FORM_CONFIG.draftAutoSave) {
        setInterval(() => {
            if (FORM_CONFIG.hasUnsavedChanges) {
                saveDraftSilently();
            }
        }, FORM_CONFIG.autoSaveInterval);
    }
}

function saveDraftSilently() {
    // Implementar save autom√°tico silencioso
    console.log('Auto-saving draft...');
    FORM_CONFIG.hasUnsavedChanges = false;
    updateFormStatus();
}

// Fun√ß√µes de utilidade
function showToast(message, type = 'info') {
    // Implementar sistema de toast
    console.log(`${type}: ${message}`);
}

function showFieldError(field, message) {
    const errorElement = document.getElementById(`${field.id}-error`);
    if (errorElement) {
        errorElement.textContent = message;
        field.classList.add('error');
    }
}

function clearFieldError(field) {
    const errorElement = document.getElementById(`${field.id}-error`);
    if (errorElement) {
        errorElement.textContent = '';
        field.classList.remove('error');
    }
}

function updateFormStatus() {
    const statusElement = document.getElementById('formStatus');
    if (statusElement) {
        statusElement.textContent = FORM_CONFIG.hasUnsavedChanges ? 
            'Altera√ß√µes n√£o salvas' : 'Todas as altera√ß√µes salvas';
        statusElement.className = FORM_CONFIG.hasUnsavedChanges ? 
            'footer-status unsaved' : 'footer-status saved';
    }
}

// Exportar fun√ß√µes globais
window.SeriesForm = {
    nextStep,
    previousStep,
    submitForm,
    saveDraft,
    resetForm
};
</script>

</body>
</html>